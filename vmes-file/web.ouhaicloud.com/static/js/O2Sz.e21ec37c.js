(window.webpackJsonp=window.webpackJsonp||[]).push([["O2Sz"],{O2Sz:function(e,t,i){"use strict";i.r(t);i("rE2o"),i("ioFf"),i("Oyvg"),i("f3/d");var a=i("hdRB");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={components:{},name:"dialog-add",props:["initData","visible"],data:function(){return{rules:{repairUserName:[{required:!0,trigger:"change",message:"请选择维修人"}],isStop:[{required:!0,trigger:"change",message:"请选择是否停机"}],timeLength:[{required:!0,trigger:"change",message:"请填写预估维修时间"}]},openDialogName:"",showDialog:!1,inLinVisible:!1,dialogData:{title:""},dialogLoading:!0,isVisible:!1,inDialog:!0,formData:{repairId:"",repairUser:"",repairUserName:"",isStop:"",timeLength:"",teimType:"",faultDescribe:""},UserDialog:{showDialog:!1,visible:!1,dialog:{data:{isSingle:!0,title:"选择制单人",tableUrl:"/system/user/listPageUsers",tableParm:{fieldCode:"code,name,mobile,email,deptName,remark"},temp:{}},dialogName:"dialogOption"}}}},created:function(){this.formData.isStop="1";var e=this.$storage.get("userInfo");this.formData.repairUser=e.userId,this.formData.repairUserName=e.userName,this.formData.teimType="M",this.formData.repairId=this.initData.repairId},mounted:function(){this.dialogLoading=!1,this.isVisible=this.visible},computed:{dialogWidth:function(){if(this.initData.width){var e=o(this.initData.width);if("number"===e)return this.initData.width+"px";if("string"===e){var t=parseInt(this.initData.width);return t?t>100?"100%":t+"%":"300px"}return"300px"}return"300px"},fullscreen:function(){return!!this.initData.fullscreen},onModal:function(){return!!this.initData["close-on-click-modal"]},onEscape:function(){return!!this.initData["close-on-press-escape"]},dialogName:function(){return this.openDialogName}},methods:{dataBridge:function(e){},dialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.submitForm.clearValidate()})},dialogClose:function(e){this.$emit("close-dialog",e||{})},deleteBtns:function(e,t){this.tableData.splice(t,1)},closeDialog:function(e){},userSelect:function(e){e[0]&&(this.formData.repairUser=e[0].id,this.formData.repairUserName=e[0].name)},isNumberByValue:function(e){return null!=e&&0!=e.trim().length&&new RegExp("^[1-9][0-9]*$").test(e.trim())},checkColumnNumberValue:function(e,t){var i="";return null!=e&&e.trim().length>0&&!this.isNumberByValue(e.trim())&&(i=t+"("+e+")输入错误，请输入大于零的整数数！"),i},checkTimeLength:function(e){var t=this.checkColumnNumberValue(e,"预估维修时间");null!=t&&t.trim().length>0&&this.$message({type:"warning",duration:5e3,showClose:!0,message:t})},save:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var i="",o=e.formData.timeLength,l=e.checkColumnNumberValue(o,"预估维修时间");if(null!=l&&l.trim().length>0&&(i+=l),null!=i&&i.trim().length>0)return void e.$message({type:"warning",duration:5e3,showClose:!0,message:i});e.dialogLoading=!0,Object(a.equipmentRepairReceive)(e.formData).then(function(t){e.dialogLoading=!1,0===t.code&&(e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.isVisible=!1,e.dialogClose({resState:"ok"}))}).catch(function(e){})}})}},watch:{}},r=i("KHd+"),n=Object(r.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.initData.title?e.initData.title:"",visible:e.isVisible,"append-to-body":e.inDialog,"close-on-click-modal":e.onModal,"close-on-press-escape":e.onEscape,fullscreen:e.fullscreen,width:"350px"},on:{"update:visible":function(t){e.isVisible=t},open:e.dialogOpen,close:e.dialogClose}},[e.showDialog?i(e.dialogName,{tag:"component",attrs:{initData:e.dialogData,visible:e.inLinVisible},on:{"close-dialog":e.closeDialog}}):e._e(),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"submitForm",staticStyle:{margin:"10px auto",width:"100%"},attrs:{rules:e.rules,model:e.formData,"label-position":"right","label-width":"120px"}},[i("el-row",[i("el-form-item",{attrs:{label:"维修人:",prop:"repairUserName"}},[i("base-input-option",{staticStyle:{width:"200px"},attrs:{dialog:e.UserDialog.dialog},on:{callback:e.userSelect},model:{value:e.formData.repairUserName,callback:function(t){e.$set(e.formData,"repairUserName",t)},expression:"formData.repairUserName"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"是否停机:",prop:"isStop"}},[i("el-select",{staticStyle:{width:"200px"},model:{value:e.formData.isStop,callback:function(t){e.$set(e.formData,"isStop",t)},expression:"formData.isStop"}},[i("el-option",{attrs:{label:"停机维修",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"非停机维修",value:"0"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"预估维修时间:",prop:"timeLength"}},[i("el-input",{staticStyle:{width:"120px"},on:{change:e.checkTimeLength},model:{value:e.formData.timeLength,callback:function(t){e.$set(e.formData,"timeLength",t)},expression:"formData.timeLength"}}),e._v(" "),i("el-select",{staticStyle:{width:"75px"},model:{value:e.formData.teimType,callback:function(t){e.$set(e.formData,"teimType",t)},expression:"formData.teimType"}},[i("el-option",{attrs:{label:"分钟",value:"M"}}),e._v(" "),i("el-option",{attrs:{label:"小时",value:"H"}}),e._v(" "),i("el-option",{attrs:{label:"天",value:"D"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"故障描述:"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",rows:"2"},model:{value:e.formData.faultDescribe,callback:function(t){e.$set(e.formData,"faultDescribe",t)},expression:"formData.faultDescribe"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","padding-bottom":"10px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="dialogRepairReceive.vue";t.default=n.exports}}]);